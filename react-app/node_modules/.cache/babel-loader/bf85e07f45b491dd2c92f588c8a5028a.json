{"ast":null,"code":"var _jsxFileName = \"/Users/guenuk/Documents/GitHub/CSE_316_Final_Project_Client/react-app/src/components/EditQuestions.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Question from \"./Question\";\nimport { nanoid } from 'nanoid';\nimport { sortByDate } from \"../utils/HelperFunctions\";\nimport { createQuestionAPIMethod, deleteQuestionByIdAPIMethod, getQuestionsAPIMethod, updateQuestionAPIMethod, deleteResponseByIdAPIMethod } from \"../api/client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction EditQuestions(props) {\n  _s();\n\n  const [questions, setQuestions] = useState(props.questions);\n  const [responses, setResponses] = useState(props.responses);\n  useEffect(() => {\n    setQuestions(props.questions);\n    setResponses(props.responses);\n  }, [props.questions, props.responses]);\n\n  const handleSubmit = () => {\n    getQuestionsAPIMethod().then(dbQuestions => {\n      console.log(questions);\n\n      for (let i = 0; i < questions.length; i++) {\n        if (questions[i].status === 'ADDED') {\n          console.log(\"question added\");\n          questions[i].status = '';\n          createQuestionAPIMethod(questions[i]);\n        }\n\n        for (let j = 0; j < dbQuestions.length; j++) {\n          let id = dbQuestions[j]._id;\n\n          if (dbQuestions[j].nanoid === questions[i].nanoid) {\n            if (questions[i].status === 'DELETED' && dbQuestions[j]._id !== undefined) {\n              console.log(\"question deleted\");\n              deleteQuestionByIdAPIMethod(id);\n\n              for (let k = 0; k < responses.length; k++) {\n                if (responses[k].question === id) {\n                  console.log(\"res deleted@@@@@\");\n                  deleteResponseByIdAPIMethod(responses[k]._id);\n                }\n              }\n            } else {\n              console.log(\"question updated\");\n              let newQuestion = {\n                _id: dbQuestions[j]._id,\n                type: questions[i].type,\n                header: questions[i].header,\n                choices: questions[i].choices,\n                mdate: questions[i].mdate,\n                nanoid: questions[i].nanoid,\n                creator: questions[i].creator\n              };\n              updateQuestionAPIMethod(newQuestion);\n            }\n          }\n        }\n      }\n    });\n    let newQuestions = questions.filter(question => question.status !== 'DELETED');\n    props.setQuestions(sortByDate(newQuestions));\n  };\n\n  const addQuestion = () => {\n    let id = nanoid();\n    let newQuestion = {\n      type: 'Text',\n      header: '',\n      choices: [],\n      mdate: new Date(),\n      nanoid: id,\n      status: 'ADDED'\n    };\n    let newQuestions = [...questions];\n    newQuestions.push(newQuestion);\n    setQuestions(newQuestions); //console.log(\"added: \" + id);\n  };\n\n  const deleteQuestion = nanoid => {\n    let newQuestions = [...questions];\n\n    for (let i = 0; i < newQuestions.length; i++) {\n      if (newQuestions[i].nanoid === nanoid) {\n        newQuestions[i].status = 'DELETED'; //console.log(\"deleted: \" + nanoid);\n      }\n    }\n\n    setQuestions(newQuestions);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"EditQuestions\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"80%\",\n        margin: \"auto\",\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Edit Questions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addQuestion,\n        style: {\n          background: \"transparent\",\n          border: \"none\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-icons\",\n          children: \"add_circle_outline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), questions ? questions.filter(question => question.status !== 'DELETED').map(question => /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"question-wrapper\",\n      style: {\n        listStyle: \"none\",\n        padding: \"5px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Question, {\n        editMode: true,\n        readOnly: false,\n        type: question.type,\n        header: question.header,\n        choices: question.choices,\n        mdate: question.mdate,\n        nanoid: question.nanoid,\n        questions: questions,\n        setQuestions: setQuestions,\n        responses: props.responses.filter(res => res.question === question._id),\n        deleteQuestion: deleteQuestion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SubmitButton\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EditQuestions, \"WVMfT8YjVWa3hybvnN193VFHeYA=\");\n\n_c = EditQuestions;\nexport default EditQuestions;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditQuestions\");","map":{"version":3,"sources":["/Users/guenuk/Documents/GitHub/CSE_316_Final_Project_Client/react-app/src/components/EditQuestions.js"],"names":["React","useState","useEffect","Question","nanoid","sortByDate","createQuestionAPIMethod","deleteQuestionByIdAPIMethod","getQuestionsAPIMethod","updateQuestionAPIMethod","deleteResponseByIdAPIMethod","EditQuestions","props","questions","setQuestions","responses","setResponses","handleSubmit","then","dbQuestions","console","log","i","length","status","j","id","_id","undefined","k","question","newQuestion","type","header","choices","mdate","creator","newQuestions","filter","addQuestion","Date","push","deleteQuestion","width","margin","display","justifyContent","background","border","map","listStyle","padding","res"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport Question from \"./Question\";\nimport {nanoid} from 'nanoid'\nimport {sortByDate} from \"../utils/HelperFunctions\";\nimport {\n    createQuestionAPIMethod,\n    deleteQuestionByIdAPIMethod,\n    getQuestionsAPIMethod,\n    updateQuestionAPIMethod,\n    deleteResponseByIdAPIMethod\n} from \"../api/client\";\n\nfunction EditQuestions(props){\n    const [questions, setQuestions] = useState(props.questions);\n    const [responses, setResponses] = useState(props.responses);\n\n    useEffect(() => {\n        setQuestions(props.questions);\n        setResponses(props.responses);\n    }, [props.questions, props.responses]);\n\n    const handleSubmit = () => {\n        getQuestionsAPIMethod().then((dbQuestions) => {\n            console.log(questions);\n            for (let i = 0; i < questions.length; i++) {\n                if (questions[i].status === 'ADDED') {\n                    console.log(\"question added\");\n                    questions[i].status = '';\n                    createQuestionAPIMethod(questions[i]);\n                }\n                for (let j = 0; j < dbQuestions.length; j++) {\n                    let id = dbQuestions[j]._id;\n                    if (dbQuestions[j].nanoid === questions[i].nanoid) {\n                        if (questions[i].status === 'DELETED' && dbQuestions[j]._id !== undefined) {\n                            console.log(\"question deleted\");\n                            deleteQuestionByIdAPIMethod(id);\n                            for (let k = 0; k < responses.length; k++) {\n                                if (responses[k].question === id) {\n                                    console.log(\"res deleted@@@@@\");\n                                    deleteResponseByIdAPIMethod(responses[k]._id);\n                                }\n                            }\n                        }\n                        else {\n                            console.log(\"question updated\");\n                            let newQuestion = {\n                                _id: dbQuestions[j]._id,\n                                type: questions[i].type,\n                                header: questions[i].header,\n                                choices: questions[i].choices,\n                                mdate: questions[i].mdate,\n                                nanoid: questions[i].nanoid,\n                                creator: questions[i].creator\n                            }\n                            updateQuestionAPIMethod(newQuestion);\n                        }\n                    }\n                }\n            }\n        });\n        let newQuestions = questions.filter((question) => question.status !== 'DELETED');\n        props.setQuestions(sortByDate(newQuestions));\n    }\n\n    const addQuestion = () => {\n        let id = nanoid();\n        let newQuestion = {\n            type: 'Text',\n            header: '',\n            choices: [],\n            mdate: new Date(),\n            nanoid: id,\n            status: 'ADDED'\n        }\n        let newQuestions = [...questions];\n        newQuestions.push(newQuestion);\n        setQuestions(newQuestions);\n        //console.log(\"added: \" + id);\n    }\n\n    const deleteQuestion = (nanoid) => {\n        let newQuestions = [...questions];\n        for (let i = 0; i < newQuestions.length; i++) {\n            if (newQuestions[i].nanoid === nanoid) {\n                newQuestions[i].status = 'DELETED';\n                //console.log(\"deleted: \" + nanoid);\n            }\n        }\n        setQuestions(newQuestions);\n    }\n\n    return (\n        <div className=\"EditQuestions\">\n            <div style={{width: \"80%\",margin: \"auto\",display: \"flex\", justifyContent: \"space-between\"}}>\n                <h3>Edit Questions</h3>\n                <button onClick={addQuestion} style={{background: \"transparent\", border: \"none\"}}>\n                    <span  className=\"material-icons\">add_circle_outline</span>\n                </button>\n            </div>\n            {\n                questions ?\n                    questions.filter((question) => question.status !== 'DELETED').map((question) =>\n                        <li className=\"question-wrapper\" style={{listStyle: \"none\", padding: \"5px\"}}>\n                            <Question\n                                editMode={true}\n                                readOnly={false}\n                                type={question.type}\n                                header={question.header}\n                                choices={question.choices}\n                                mdate={question.mdate}\n                                nanoid={question.nanoid}\n                                questions={questions}\n                                setQuestions={setQuestions}\n                                responses={props.responses.filter((res) => res.question === question._id)}\n                                deleteQuestion={deleteQuestion}\n                            />\n                        </li>\n                    )\n                    : <></>\n            }\n            <div className=\"SubmitButton\">\n                <button onClick={handleSubmit}>Save</button>\n            </div>\n        </div>\n    );\n}\nexport default EditQuestions"]},"metadata":{},"sourceType":"module"}